!function(){window.Trendchattr=Ember.Application.create({LOG_TRANSITIONS:!0,LOG_ACTIVE_GENERATION:!0,Socket:EmberSockets.extend({host:"api.trendchattr.com",port:80,controllers:["rooms"]})})}(),function(){Trendchattr.ApplicationController=Ember.ObjectController.extend({username:"Anon1"}),Trendchattr.RoomsIndexController=Ember.ArrayController.extend({actions:{join:function(a){return this.socket.emit("join",a),!1}}}),Trendchattr.RoomsController=Ember.ArrayController.extend({sockets:{message:function(a){console.log(a);var b=this.store.createRecord("message",{chatroom:this.store.getById("chatroom",a.chatroom_id),username:a.username,message:a.message});this.store.push("message",b),Ember.run.scheduleOnce("afterRender",this,function(){var a=document.getElementById("chat-messages");a.scrollTop=a.scrollHeight})}},actions:{join:function(a){return this.socket.emit("join",a),!1}},totalRooms:function(){return this.get("model.length")}.property("@each")}),Trendchattr.RoomController=Ember.ObjectController.extend({needs:"application",application:Ember.computed.alias("controllers.application"),username:null,actions:{newMessage:null,sendMessage:function(){var a=this.get("newMessage");if(!a)return!1;if(a.trim()){this.set("newMessage","");var b=this.store.createRecord("message",{username:this.get("application.username"),message:a,chatroom:this.store.getById("chatroom",this.get("id")),myMessage:!0});return b.save(),Ember.run.scheduleOnce("afterRender",this,function(){var a=document.getElementById("chat-messages");a.scrollTop=a.scrollHeight}),this.socket.emit("message",{chatroom_id:this.get("id"),chatroom:this.store.getById("chatroom",this.get("id")),username:this.get("application.username"),message:a}),!1}}}})}(),function(){Trendchattr.ApplicationAdapter=DS.RESTAdapter.extend({host:"http://api.trendchattr.com"}),Trendchattr.ApplicationSerializer=DS.RESTSerializer.extend({normalizeHash:{chatrooms:function(a){return a.id=a._id,delete a._id,a}}})}(),function(){Trendchattr.User=DS.Model.extend({username:DS.attr("string"),online:DS.attr("boolean")}),Trendchattr.User.FIXTURES=[{id:1,username:"bob",online:!0}],Trendchattr.Message=DS.Model.extend({chatroom:DS.belongsTo("chatroom"),username:DS.attr("string"),message:DS.attr("string"),myMessage:DS.attr("boolean",{defaultValue:!1})}),Trendchattr.Message.FIXTURES=[],Trendchattr.Chatroom=DS.Model.extend({source:DS.attr("string"),chatroom:DS.attr("string"),joined:DS.attr("number",{defaultValue:0}),chatMessages:DS.hasMany("message")})}(),function(){Trendchattr.ApplicationRoute=Ember.Route.extend({model:function(){return{id:1,username:"bob",online:!0}},setupController:function(a,b){this._super(a,b)}}),Trendchattr.RoomsRoute=Ember.Route.extend({model:function(){return this.store.find("chatroom")},setupController:function(a,b){this._super(a,b)}}),Trendchattr.RoomRoute=Ember.Route.extend({model:function(a){return this.store.find("chatroom",a.room_id)},setupController:function(a,b){this._super(a,b)}})}(),function(){Trendchattr.SidePanelComponent=Em.Component.extend({tagName:"div",classNames:["sidepanel"],name:null,classNameBindings:["isOpen:opened:closed"],isOpen:!0,actions:{toggleSidepanel:function(){this.toggleProperty("isOpen")}}})}(),function(){Trendchattr.Router.map(function(){this.route("index",{path:"/"}),this.route("about"),this.resource("rooms",function(){this.resource("room",{path:"/:room_id"},function(){})})})}(),function(){Ember.LinkView.reopen({attributeBindings:["data-toggle","data-target"]})}();